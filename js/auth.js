$(document).ready((function(){var a=$("body").data("prefix");$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).on("click",".auth-forgot",(function(e){$(".msg-error").hide(),$(this).find(".button-ajax-loader").show(),$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"login="+$(".auth-forgot-login").val()+"&action=forgot",dataType:"json",cache:!1,success:function(a){1==a.status?($(".modal-custom-bg").hide(),$("#modal-auth-recovery-success").show(),$("body").css("overflow","hidden"),$("#modal-auth-recovery-success p").html(a.answer)):$(".msg-error[data-name=user_recovery_login]").html(a.answer).show(),$(".button-ajax-loader").hide()}}),e.preventDefault()})),$(document).on("click",".auth-reg-send-v-1",(function(e){$(".msg-error").hide();var t=$(this);t.prop("disabled",!0),$(this).find(".button-ajax-loader").show(),"send_sms"==$(this).data("action")?$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_phone="+$("input[name=user_phone]").val()+"&captcha="+$("input[name=captcha]").val()+"&action=send_sms",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),a.captcha&&$(".auth-captcha").show(),1==a.status?($(".auth-block-right-box-tab-1-1").hide(),$(".auth-block-right-box-tab-1-2").show()):2==a.status_user?($("#modal-auth-block").show(),$("body").css("overflow","hidden")):3==a.status_user?($("#modal-auth-delete").show(),$("body").css("overflow","hidden")):$.each(a.answer,(function(a,e){$(".msg-error[data-name="+a+"]").html(e).show()})),$(".button-ajax-loader").hide()}}):"verify_sms"==$(this).data("action")?$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_phone="+$("input[name=user_phone]").val()+"&user_code_sms="+$("input[name=user_code_sms]").val()+"&action=verify_sms",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),1==a.status?a.reg?location.reload():($(".auth-block-right-box-tab-1-2").hide(),$(".auth-block-right-box-tab-1-3").show()):$(".msg-error[data-name=user_code_sms]").html(a.answer).show(),$(".button-ajax-loader").hide()}}):"reg_finish"==$(this).data("action")&&$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_phone="+$("input[name=user_phone]").val()+"&user_name="+$("input[name=user_name]").val()+"&action=reg_phone_finish",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),1==a.status?location.reload():$(".msg-error[data-name=user_name]").html(a.answer).show(),$(".button-ajax-loader").hide()}}),e.preventDefault()})),$(document).on("click",".auth-reg-send-v-2",(function(e){$(".msg-error").hide();var t=$(this);t.prop("disabled",!0),$(this).find(".button-ajax-loader").show(),"login_pass"==$(this).data("action")?$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_login="+$("input[name=user_login]").val()+"&user_pass="+$("input[name=user_pass]").val()+"&captcha="+$("input[name=captcha]").val()+"&action=check_auth_login",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),a.captcha&&$(".auth-captcha").show(),1==a.status?a.reg?location.reload():($(".auth-block-right-box-tab-1-1").hide(),$(".auth-block-right-box-tab-1-2").show()):2==a.status_user?($("#modal-auth-block").show(),$("body").css("overflow","hidden")):3==a.status_user?($("#modal-auth-delete").show(),$("body").css("overflow","hidden")):$.each(a.answer,(function(a,e){$(".msg-error[data-name="+a+"]").html(e).show()})),$(".button-ajax-loader").hide()}}):"verify_login"==$(this).data("action")?$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_login="+$("input[name=user_login]").val()+"&user_code_login="+$("input[name=user_code_login]").val()+"&action=verify_login",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),1==a.status?($(".auth-block-right-box-tab-1-2").hide(),$(".auth-block-right-box-tab-1-3").show()):$(".msg-error[data-name=user_code_login]").html(a.answer).show(),$(".button-ajax-loader").hide()}}):"reg_finish"==$(this).data("action")&&$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_login="+$("input[name=user_login]").val()+"&user_code_login="+$("input[name=user_code_login]").val()+"&user_pass="+$("input[name=user_pass]").val()+"&user_name="+$("input[name=user_name]").val()+"&action=reg_login_finish",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),1==a.status?location.reload():$(".msg-error[data-name=user_name]").html(a.answer).show(),$(".button-ajax-loader").hide()}}),e.preventDefault()})),$(document).on("click",".auth-reg-send-v-3",(function(e){$(".msg-error").hide();var t=$(this);t.prop("disabled",!0),$(this).find(".button-ajax-loader").show(),"email_pass"==$(this).data("action")?$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_email="+$("input[name=user_email]").val()+"&user_pass="+$("input[name=user_pass]").val()+"&captcha="+$("input[name=captcha]").val()+"&action=check_auth_email",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),a.captcha&&$(".auth-captcha").show(),1==a.status?a.reg?location.reload():($(".auth-block-right-box-tab-1-1").hide(),$(".auth-block-right-box-tab-1-2").show()):2==a.status_user?($("#modal-auth-block").show(),$("body").css("overflow","hidden")):3==a.status_user?($("#modal-auth-delete").show(),$("body").css("overflow","hidden")):$.each(a.answer,(function(a,e){$(".msg-error[data-name="+a+"]").html(e).show()})),$(".button-ajax-loader").hide()}}):"verify_email"==$(this).data("action")?$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_email="+$("input[name=user_email]").val()+"&user_code_email="+$("input[name=user_code_email]").val()+"&action=verify_email",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),1==a.status?($(".auth-block-right-box-tab-1-2").hide(),$(".auth-block-right-box-tab-1-3").show()):$(".msg-error[data-name=user_code_email]").html(a.answer).show(),$(".button-ajax-loader").hide()}}):"reg_finish"==$(this).data("action")&&$.ajax({type:"POST",url:a+"systems/ajax/profile.php",data:"user_email="+$("input[name=user_email]").val()+"&user_code_email="+$("input[name=user_code_email]").val()+"&user_pass="+$("input[name=user_pass]").val()+"&user_name="+$("input[name=user_name]").val()+"&action=reg_email_finish",dataType:"json",cache:!1,success:function(a){t.prop("disabled",!1),1==a.status?location.reload():$(".msg-error[data-name=user_name]").html(a.answer).show(),$(".button-ajax-loader").hide()}}),e.preventDefault()})),$(document).on("click",".auth-block-right-box-tab-1-2-back > span",(function(a){$(".auth-block-right-box-tab-1-2").hide(),$(".auth-block-right-box-tab-1-1").show()}))}));